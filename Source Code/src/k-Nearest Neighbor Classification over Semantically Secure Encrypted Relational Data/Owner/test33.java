package com.tmks.jdbc.demo;

import javax.swing.*;

import java.sql.*;
import java.awt.*;
import java.awt.event.*;
import java.sql.Connection;

public class JdbcDemo implements ActionListener{
	
	JFrame jf;
	JPanel jp;
	
	JLabel jl1;
	//JLabel jl2;
	JTextField jtf;
	
	//JPasswordField jpf;
	JButton jb;
	
	public JdbcDemo(){
		

		
		jf=new JFrame("JdbcDemo");
		jp=new JPanel();
		jl1=new JLabel("UserName: ");
		jtf=new JTextField(15);
		jb=new JButton("submit");
		
		//jl2=new JLabel("Password: ");
		
		//jtf=new JTextField();
		//jpf=new JPasswordField();
		jp.setLayout(null);
		System.out.println("jdbcDemo");
		
		jl1.setBounds(200, 300, 50, 20);
		jtf.setBounds(250, 350, 20, 50);
		jb.setBounds(300, 300, 20, 50);
		
		jb.addActionListener(this);
		
		jp.add(jl1);
		jp.add(jtf);
		jp.add(jb);
		jf.add(jp);
		
		jf.setSize(500,500);
		jf.setVisible(true);
		
		
	}
	
	public static void main(String args[]){
		new JdbcDemo();
		
	}

	@Override
	public void actionPerformed(ActionEvent ae) {
		
		Connection con=null;
		Statement st=null;
		String name=jtf.getText();
		
		if(ae.getSource()==jb){
			
			try{
				con=JdbcConncetion.getConnection();
				st=con.createStatement();
				String sql="insert into logindemo values('"+name+"')";
				int i=st.executeUpdate(sql);
				if(i==0){
					JOptionPane.showMessageDialog(null, "Record not inserted Successfully");
				}
					else{
						JOptionPane.showMessageDialog(null, "Record inserted Successfully");
				}
				
			}catch(Exception e){
				try{
					con.close();
					st.close();
					
					
				}catch(Exception ie){
					ie.printStackTrace();
				}
				
				e.printStackTrace();
			}
			
		
		
			
		}
		
	}

}
